================================================================================================================================================================================================================================================

                    API TRADING ENDPOINTS - DOCUMENTA√á√ÉO COMPLETA

================================================================================                    API TRADING ENDPOINTS - ORGANIZADO                    API TRADING ENDPOINTS - MEXC



üìå BASE URL: http://localhost:5000================================================================================================================================================================

üìå EXCHANGE ID (MEXC): 693481148b0a41e8b6acb07b

üìå USER ID: charles_test_user



================================================================================üìå BASE URL: http://localhost:5000üìå BASE URL: http://localhost:5000

√çNDICE - ENDPOINTS ESSENCIAIS

================================================================================üìå EXCHANGE ID (MEXC): 693481148b0a41e8b6acb07büìå EXCHANGE ID (MEXC): 693481148b0a41e8b6acb07b



1. ‚úÖ CONSULTAR SALDO DE TOKENüìå USER ID: charles_test_userüìå USER ID: charles_test_user

2. ‚úÖ CRIAR ORDEM DE COMPRA (Limit/Market)

3. ‚úÖ CRIAR ORDEM DE VENDA (Limit/Market)

4. ‚úÖ CANCELAR ORDEM

5. ‚úÖ HIST√ìRICO DE ORDENS (com cache)================================================================================================================================================================

6. ‚úÖ LISTAR TOKENS DISPON√çVEIS

√çNDICE DE ENDPOINTS ESSENCIAIS√çNDICE DE ENDPOINTS

================================================================================

1. CONSULTAR SALDO DE TOKEN================================================================================================================================================================

================================================================================



DESCRI√á√ÉO:

Verifica quantidade dispon√≠vel de um token para venda.1. ‚úÖ CONSULTAR SALDO DE TOKEN - Verificar quantidade dispon√≠vel1. CONSULTAR SALDO DE TOKEN - Verificar quantidade dispon√≠vel



ENDPOINT:2. ‚úÖ CRIAR ORDEM DE COMPRA - Limit ou Market2. CRIAR ORDEM DE COMPRA (LIMIT) - Ordem com pre√ßo espec√≠fico

GET /api/v1/exchanges/<exchange_id>/balance/<token>

3. ‚úÖ CRIAR ORDEM DE VENDA - Limit ou Market3. CRIAR ORDEM DE COMPRA (MARKET) - Ordem a pre√ßo de mercado

CURL - Verificar USDT:

curl "http://localhost:5000/api/v1/exchanges/693481148b0a41e8b6acb07b/balance/USDT?user_id=charles_test_user"4. ‚úÖ CANCELAR ORDEM - Cancelar ordem aberta4. CRIAR ORDEM DE VENDA (LIMIT) - Ordem com pre√ßo espec√≠fico



CURL - Verificar BTC:5. ‚úÖ HIST√ìRICO DE ORDENS - Com cache de 5 minutos5. CRIAR ORDEM DE VENDA (MARKET) - Ordem a pre√ßo de mercado

curl "http://localhost:5000/api/v1/exchanges/693481148b0a41e8b6acb07b/balance/BTC?user_id=charles_test_user"

6. ‚úÖ LISTAR TOKENS DISPON√çVEIS - Todos os pares USDT6. CANCELAR ORDEM - Cancelar ordem aberta

CURL - Verificar DOGE:

curl "http://localhost:5000/api/v1/exchanges/693481148b0a41e8b6acb07b/balance/DOGE?user_id=charles_test_user"7. HIST√ìRICO DE ORDENS - Com cache (√∫ltimas 100 ordens)



RESPONSE (COM SALDO):================================================================================8. LISTAR TOKENS DISPON√çVEIS - Todos os pares USDT

{

  "success": true,1. CONSULTAR SALDO DE TOKEN ‚≠ê9. BUSCAR TOKEN ESPEC√çFICO - Pesquisar por s√≠mbolo

  "token": "USDT",

  "exchange": "MEXC",================================================================================10. CONSULTAR ORDENS ABERTAS - Ordens pendentes

  "balance": {

    "available": 100.50,    // ‚úÖ Dispon√≠vel para trading

    "used": 25.00,          // üîí Bloqueado em ordens

    "total": 125.50         // üí∞ TotalDESCRI√á√ÉO:================================================================================

  },

  "can_sell": true,Verifica a quantidade dispon√≠vel de um token espec√≠fico para venda.1. CONSULTAR SALDO DE TOKEN ‚≠ê NOVO

  "message": "Voc√™ possui 100.50 USDT dispon√≠vel para venda"

}Mostra saldo dispon√≠vel, bloqueado em ordens e total.================================================================================



RESPONSE (SEM SALDO):

{

  "success": true,ENDPOINT:curl "http://localhost:5000/api/v1/exchanges/693481148b0a41e8b6acb07b/balance/USDT?user_id=charles_test_user"

  "token": "DOGE",

  "exchange": "MEXC",GET /api/v1/exchanges/<exchange_id>/balance/<token>?user_id=<user_id>

  "available": 0.0,

  "can_sell": false,RESPONSE EXEMPLO (COM SALDO):

  "message": "Voc√™ n√£o possui DOGE nesta exchange"

}CURL:{



================================================================================curl "http://localhost:5000/api/v1/exchanges/693481148b0a41e8b6acb07b/balance/USDT?user_id=charles_test_user"  "success": true,

2. CRIAR ORDEM DE COMPRA

================================================================================  "token": "USDT",



ENDPOINT:RESPONSE (COM SALDO):  "exchange": "MEXC",

POST /api/v1/orders/buy

{  "exchange_id": "693481148b0a41e8b6acb07b",

-----------------------------------

2A. COMPRA LIMIT (com pre√ßo)  "success": true,  "balance": {

-----------------------------------

  "token": "USDT",    "available": 100.50,      // Dispon√≠vel para trading

CURL:

curl -X POST http://localhost:5000/api/v1/orders/buy \  "exchange": "MEXC",    "used": 25.00,            // Bloqueado em ordens abertas

  -H "Content-Type: application/json" \

  -d '{  "exchange_id": "693481148b0a41e8b6acb07b",    "total": 125.50           // Total (available + used)

    "user_id": "charles_test_user",

    "exchange_id": "693481148b0a41e8b6acb07b",  "balance": {  },

    "token": "DOGE",

    "amount": 100,    "available": 100.50,      // ‚úÖ Dispon√≠vel para trading  "can_sell": true,

    "order_type": "limit",

    "price": 0.20    "used": 25.00,            // üîí Bloqueado em ordens abertas  "message": "Voc√™ possui 100.50 USDT dispon√≠vel para venda"

  }'

    "total": 125.50           // üí∞ Total (available + used)}

RESPONSE:

{  },

  "success": true,

  "dry_run": true,  "can_sell": true,RESPONSE EXEMPLO (SEM SALDO):

  "order": {

    "id": "DRY-1766513096",  "message": "Voc√™ possui 100.50 USDT dispon√≠vel para venda"{

    "symbol": "DOGE/USDT",

    "side": "buy",}  "success": true,

    "type": "limit",

    "amount": 100,  "token": "DOGE",

    "price": 0.20,

    "status": "simulated"RESPONSE (SEM SALDO):  "exchange": "MEXC",

  }

}{  "exchange_id": "693481148b0a41e8b6acb07b",



-----------------------------------  "success": true,  "available": 0.0,

2B. COMPRA MARKET (pre√ßo mercado)

-----------------------------------  "token": "DOGE",  "used": 0.0,



CURL:  "exchange": "MEXC",  "total": 0.0,

curl -X POST http://localhost:5000/api/v1/orders/buy \

  -H "Content-Type: application/json" \  "exchange_id": "693481148b0a41e8b6acb07b",  "can_sell": false,

  -d '{

    "user_id": "charles_test_user",  "available": 0.0,  "message": "Voc√™ n√£o possui DOGE nesta exchange"

    "exchange_id": "693481148b0a41e8b6acb07b",

    "token": "BTC",  "used": 0.0,}

    "amount": 0.001,

    "order_type": "market"  "total": 0.0,

  }'

  "can_sell": false,OUTROS EXEMPLOS:

================================================================================

3. CRIAR ORDEM DE VENDA  "message": "Voc√™ n√£o possui DOGE nesta exchange"# Verificar saldo de BTC

================================================================================

}curl "http://localhost:5000/api/v1/exchanges/693481148b0a41e8b6acb07b/balance/BTC?user_id=charles_test_user"

ENDPOINT:

POST /api/v1/orders/sell



-----------------------------------OUTROS EXEMPLOS:# Verificar saldo de ETH

3A. VENDA LIMIT (com pre√ßo)

-----------------------------------# Verificar BTCcurl "http://localhost:5000/api/v1/exchanges/693481148b0a41e8b6acb07b/balance/ETH?user_id=charles_test_user"



CURL:curl "http://localhost:5000/api/v1/exchanges/693481148b0a41e8b6acb07b/balance/BTC?user_id=charles_test_user"

curl -X POST http://localhost:5000/api/v1/orders/sell \

  -H "Content-Type: application/json" \# Verificar saldo de DOGE

  -d '{

    "user_id": "charles_test_user",# Verificar ETHcurl "http://localhost:5000/api/v1/exchanges/693481148b0a41e8b6acb07b/balance/DOGE?user_id=charles_test_user"

    "exchange_id": "693481148b0a41e8b6acb07b",

    "token": "DOGE",curl "http://localhost:5000/api/v1/exchanges/693481148b0a41e8b6acb07b/balance/ETH?user_id=charles_test_user"

    "amount": 50,

    "order_type": "limit",================================================================================

    "price": 0.50

  }'# Verificar DOGE2. CRIAR ORDEM DE COMPRA (LIMIT)



-----------------------------------curl "http://localhost:5000/api/v1/exchanges/693481148b0a41e8b6acb07b/balance/DOGE?user_id=charles_test_user"================================================================================

3B. VENDA MARKET (pre√ßo mercado)

-----------------------------------



CURL:================================================================================curl -X POST http://localhost:5000/api/v1/orders/buy \

curl -X POST http://localhost:5000/api/v1/orders/sell \

  -H "Content-Type: application/json" \2. CRIAR ORDEM DE COMPRA ‚≠ê  -H "Content-Type: application/json" \

  -d '{

    "user_id": "charles_test_user",================================================================================  -d '{

    "exchange_id": "693481148b0a41e8b6acb07b",

    "token": "ETH",    "user_id": "charles_test_user",

    "amount": 0.1,

    "order_type": "market"DESCRI√á√ÉO:    "exchange_id": "693481148b0a41e8b6acb07b",

  }'

Cria uma ordem de compra (limit com pre√ßo ou market a pre√ßo de mercado).    "token": "DOGE",

================================================================================

4. CANCELAR ORDEM    "amount": 100,

================================================================================

ENDPOINT:    "order_type": "limit",

ENDPOINT:

POST /api/v1/orders/cancelPOST /api/v1/orders/buy    "price": 0.20



CURL:  }'

curl -X POST http://localhost:5000/api/v1/orders/cancel \

  -H "Content-Type: application/json" \--------------------------------------------------------------------------------

  -d '{

    "user_id": "charles_test_user",2A. ORDEM DE COMPRA LIMIT (com pre√ßo espec√≠fico)RESPONSE EXEMPLO:

    "order_id": "12345678"

  }'--------------------------------------------------------------------------------{



RESPONSE (SUCESSO):  "success": true,

{

  "success": true,CURL:  "dry_run": true,

  "message": "Ordem cancelada com sucesso",

  "order_id": "12345678"curl -X POST http://localhost:5000/api/v1/orders/buy \  "order": {

}

  -H "Content-Type: application/json" \    "id": "DRY-1766513096.228224",

================================================================================

5. HIST√ìRICO DE ORDENS (COM CACHE 5 MIN) ‚≠ê  -d '{    "symbol": "DOGE/USDT",

================================================================================

    "user_id": "charles_test_user",    "side": "buy",

DESCRI√á√ÉO:

Busca hist√≥rico de ordens fechadas/canceladas.    "exchange_id": "693481148b0a41e8b6acb07b",    "type": "limit",

‚úÖ Cache de 5 minutos

‚ö†Ô∏è  SYMBOL √© OBRIGAT√ìRIO    "token": "DOGE",    "amount": 100,



ENDPOINT:    "amount": 100,    "price": 0.20,

GET /api/v1/orders/history

    "order_type": "limit",    "status": "simulated",

PAR√ÇMETROS:

- user_id (obrigat√≥rio)    "price": 0.20    "timestamp": "2025-12-24T15:04:56.228230"

- exchange_id (obrigat√≥rio)

- symbol (OBRIGAT√ìRIO): ex: DOGE/USDT, BTC/USDT  }'  }

- limit (opcional): default 100, max 500

- use_cache (opcional): default true}



CURL - Hist√≥rico DOGE/USDT:RESPONSE:

curl "http://localhost:5000/api/v1/orders/history?user_id=charles_test_user&exchange_id=693481148b0a41e8b6acb07b&symbol=DOGE/USDT&limit=50"

{================================================================================

CURL - Hist√≥rico BTC/USDT:

curl "http://localhost:5000/api/v1/orders/history?user_id=charles_test_user&exchange_id=693481148b0a41e8b6acb07b&symbol=BTC/USDT&limit=100"  "success": true,2. CRIAR ORDEM DE COMPRA (MARKET)



CURL - Sem cache:  "dry_run": true,================================================================================

curl "http://localhost:5000/api/v1/orders/history?user_id=charles_test_user&exchange_id=693481148b0a41e8b6acb07b&symbol=DOGE/USDT&use_cache=false"

  "order": {

RESPONSE:

{    "id": "DRY-1766513096.228224",curl -X POST http://localhost:5000/api/v1/orders/buy \

  "success": true,

  "count": 50,    "symbol": "DOGE/USDT",  -H "Content-Type: application/json" \

  "exchange": "MEXC",

  "symbol": "DOGE/USDT",    "side": "buy",  -d '{

  "from_cache": true,

  "orders": [    "type": "limit",    "user_id": "charles_test_user",

    {

      "id": "12345678",    "amount": 100,    "exchange_id": "693481148b0a41e8b6acb07b",

      "symbol": "DOGE/USDT",

      "type": "limit",    "price": 0.20,    "token": "BTC",

      "side": "buy",

      "price": 0.20,    "status": "simulated",    "amount": 0.001,

      "amount": 100.0,

      "filled": 100.0,    "timestamp": "2025-12-24T15:04:56.228230",    "order_type": "market"

      "status": "closed",

      "timestamp": 1766513096228,    "total_cost": 20.00  }'

      "cost": 20.0,

      "fee": { "cost": 0.02, "currency": "USDT" }  }

    }

  ]}RESPONSE EXEMPLO:

}

{

CACHE:

üíæ Cache ativo por 5 minutos--------------------------------------------------------------------------------  "success": true,

üîÑ For√ßar atualiza√ß√£o: use_cache=false

2B. ORDEM DE COMPRA MARKET (a pre√ßo de mercado)  "dry_run": true,

================================================================================

6. LISTAR TOKENS DISPON√çVEIS--------------------------------------------------------------------------------  "order": {

================================================================================

    "id": "DRY-1766513200.123456",

ENDPOINT:

GET /api/v1/exchanges/<exchange_id>/marketsCURL:    "symbol": "BTC/USDT",



PAR√ÇMETROS:curl -X POST http://localhost:5000/api/v1/orders/buy \    "side": "buy",

- user_id (obrigat√≥rio)

- quote (opcional): default USDT  -H "Content-Type: application/json" \    "type": "market",

- search (opcional): filtrar token

  -d '{    "amount": 0.001,

CURL - Todos pares USDT:

curl "http://localhost:5000/api/v1/exchanges/693481148b0a41e8b6acb07b/markets?user_id=charles_test_user&quote=USDT"    "user_id": "charles_test_user",    "status": "simulated",



CURL - Buscar DOGE:    "exchange_id": "693481148b0a41e8b6acb07b",    "timestamp": "2025-12-24T15:06:40.123456"

curl "http://localhost:5000/api/v1/exchanges/693481148b0a41e8b6acb07b/markets?user_id=charles_test_user&search=DOGE"

    "token": "BTC",  }

RESPONSE:

{    "amount": 0.001,}

  "success": true,

  "count": 2876,    "order_type": "market"

  "exchange": "MEXC",

  "markets": [  }'================================================================================

    {

      "symbol": "BTC/USDT",3. CRIAR ORDEM DE VENDA (LIMIT)

      "base": "BTC",

      "quote": "USDT",RESPONSE:================================================================================

      "active": true,

      "limits": {{

        "amount": { "min": 0.000001 },

        "cost": { "min": 1.0 }  "success": true,curl -X POST http://localhost:5000/api/v1/orders/sell \

      }

    }  "dry_run": true,  -H "Content-Type: application/json" \

  ]

}  "order": {  -d '{



================================================================================    "id": "DRY-1766513200.123456",    "user_id": "charles_test_user",

TOKENS POPULARES

================================================================================    "symbol": "BTC/USDT",    "exchange_id": "693481148b0a41e8b6acb07b",



TOKEN     | SYMBOL     | MIN AMOUNT | MIN COST    "side": "buy",    "token": "DOGE",

--------- | ---------- | ---------- | --------

Bitcoin   | BTC/USDT   | 0.000001   | $1.00    "type": "market",    "amount": 50,

Ethereum  | ETH/USDT   | 0.0001     | $1.00

Solana    | SOL/USDT   | 0.01       | $1.00    "amount": 0.001,    "order_type": "limit",

Dogecoin  | DOGE/USDT  | 1.0        | $1.00

XRP       | XRP/USDT   | 0.1        | $1.00    "status": "simulated",    "price": 0.50



================================================================================    "timestamp": "2025-12-24T15:06:40.123456"  }'

C√ìDIGO JAVASCRIPT

================================================================================  }



// 1. Verificar saldo}RESPONSE EXEMPLO:

async function checkBalance(userId, exchangeId, token) {

  const res = await fetch({

    \`http://localhost:5000/api/v1/exchanges/\${exchangeId}/balance/\${token}?user_id=\${userId}\`

  );================================================================================  "success": true,

  return await res.json();

}3. CRIAR ORDEM DE VENDA ‚≠ê  "dry_run": true,



// 2. Comprar (limit)================================================================================  "order": {

async function buyLimit(userId, exchangeId, token, amount, price) {

  const res = await fetch('http://localhost:5000/api/v1/orders/buy', {    "id": "DRY-1766513300.456789",

    method: 'POST',

    headers: { 'Content-Type': 'application/json' },DESCRI√á√ÉO:    "symbol": "DOGE/USDT",

    body: JSON.stringify({

      user_id: userId,Cria uma ordem de venda (limit com pre√ßo ou market a pre√ßo de mercado).    "side": "sell",

      exchange_id: exchangeId,

      token, amount,    "type": "limit",

      order_type: 'limit',

      priceENDPOINT:    "amount": 50,

    })

  });POST /api/v1/orders/sell    "price": 0.50,

  return await res.json();

}    "status": "simulated",



// 3. Vender (limit)--------------------------------------------------------------------------------    "timestamp": "2025-12-24T15:08:20.456789"

async function sellLimit(userId, exchangeId, token, amount, price) {

  const res = await fetch('http://localhost:5000/api/v1/orders/sell', {3A. ORDEM DE VENDA LIMIT (com pre√ßo espec√≠fico)  }

    method: 'POST',

    headers: { 'Content-Type': 'application/json' },--------------------------------------------------------------------------------}

    body: JSON.stringify({

      user_id: userId,

      exchange_id: exchangeId,

      token, amount,CURL:================================================================================

      order_type: 'limit',

      pricecurl -X POST http://localhost:5000/api/v1/orders/sell \4. CRIAR ORDEM DE VENDA (MARKET)

    })

  });  -H "Content-Type: application/json" \================================================================================

  return await res.json();

}  -d '{



// 4. Cancelar ordem    "user_id": "charles_test_user",curl -X POST http://localhost:5000/api/v1/orders/sell \

async function cancelOrder(userId, orderId) {

  const res = await fetch('http://localhost:5000/api/v1/orders/cancel', {    "exchange_id": "693481148b0a41e8b6acb07b",  -H "Content-Type: application/json" \

    method: 'POST',

    headers: { 'Content-Type': 'application/json' },    "token": "DOGE",  -d '{

    body: JSON.stringify({ user_id: userId, order_id: orderId })

  });    "amount": 50,    "user_id": "charles_test_user",

  return await res.json();

}    "order_type": "limit",    "exchange_id": "693481148b0a41e8b6acb07b",



// 5. Hist√≥rico (com cache)    "price": 0.50    "token": "ETH",

async function getHistory(userId, exchangeId, symbol, limit = 100) {

  const res = await fetch(  }'    "amount": 0.1,

    \`http://localhost:5000/api/v1/orders/history?user_id=\${userId}&exchange_id=\${exchangeId}&symbol=\${symbol}&limit=\${limit}\`

  );    "order_type": "market"

  return await res.json();

}RESPONSE:  }'



// 6. Listar tokens{

async function getTokens(userId, exchangeId) {

  const res = await fetch(  "success": true,RESPONSE EXEMPLO:

    \`http://localhost:5000/api/v1/exchanges/\${exchangeId}/markets?user_id=\${userId}&quote=USDT\`

  );  "dry_run": true,{

  return await res.json();

}  "order": {  "success": true,



// EXEMPLO DE USO COMPLETO    "id": "DRY-1766513300.456789",  "dry_run": true,

async function tradingExample() {

  const userId = 'charles_test_user';    "symbol": "DOGE/USDT",  "order": {

  const exchangeId = '693481148b0a41e8b6acb07b';

      "side": "sell",    "id": "DRY-1766513400.789012",

  // 1. Verificar saldo

  const balance = await checkBalance(userId, exchangeId, 'USDT');    "type": "limit",    "symbol": "ETH/USDT",

  console.log('Saldo:', balance.balance?.available || 0);

      "amount": 50,    "side": "sell",

  // 2. Listar tokens

  const tokens = await getTokens(userId, exchangeId);    "price": 0.50,    "type": "market",

  console.log('Tokens:', tokens.count);

      "status": "simulated",    "amount": 0.1,

  // 3. Comprar DOGE

  const order = await buyLimit(userId, exchangeId, 'DOGE', 100, 0.20);    "timestamp": "2025-12-24T15:08:20.456789",    "status": "simulated",

  console.log('Ordem:', order.order?.id);

      "total_value": 25.00    "timestamp": "2025-12-24T15:10:00.789012"

  // 4. Ver hist√≥rico

  const history = await getHistory(userId, exchangeId, 'DOGE/USDT', 50);  }  }

  console.log('Hist√≥rico:', history.count, 'ordens');

  }}

  // 5. Cancelar ordem

  if (order.order?.id) {

    await cancelOrder(userId, order.order.id);

  }--------------------------------------------------------------------------------================================================================================

}

3B. ORDEM DE VENDA MARKET (a pre√ßo de mercado)5. LISTAR TOKENS DISPON√çVEIS (TODOS USDT)

================================================================================

OBSERVA√á√ïES IMPORTANTES--------------------------------------------------------------------------------================================================================================

================================================================================



‚ö†Ô∏è DRY-RUN MODE:

‚úì Sistema em modo simula√ß√£o por padr√£oCURL:curl "http://localhost:5000/api/v1/exchanges/693481148b0a41e8b6acb07b/markets?user_id=charles_test_user&quote=USDT"

‚úì Ordens N√ÉO s√£o executadas na exchange real

‚úì Para desabilitar: STRATEGY_DRY_RUN=false no .envcurl -X POST http://localhost:5000/api/v1/orders/sell \



‚ö†Ô∏è CACHE:  -H "Content-Type: application/json" \RESPONSE EXEMPLO:

‚úì Hist√≥rico tem cache de 5 minutos

‚úì For√ßar atualiza√ß√£o: use_cache=false  -d '{{



‚ö†Ô∏è VALIDA√á√ïES:    "user_id": "charles_test_user",  "success": true,

‚úì Sempre verificar saldo antes de criar ordem

‚úì Validar quantidade m√≠nima do token    "exchange_id": "693481148b0a41e8b6acb07b",  "count": 2876,

‚úì Symbol √© obrigat√≥rio para hist√≥rico

    "token": "ETH",  "exchange": "MEXC",

================================================================================

RESUMO DOS ENDPOINTS    "amount": 0.1,  "exchange_id": "693481148b0a41e8b6acb07b",

================================================================================

    "order_type": "market"  "quote_filter": "USDT",

ENDPOINT                                | M√âTODO | CACHE

--------------------------------------- | ------ | -----  }'  "markets": [

/exchanges/{id}/balance/{token}         | GET    | N√£o

/orders/buy                             | POST   | N√£o    {

/orders/sell                            | POST   | N√£o

/orders/cancel                          | POST   | N√£oRESPONSE:      "symbol": "BTC/USDT",

/orders/history                         | GET    | 5 min

/exchanges/{id}/markets                 | GET    | N√£o{      "base": "BTC",



================================================================================  "success": true,      "quote": "USDT",

FIM

================================================================================  "dry_run": true,      "active": true,


  "order": {      "limits": {

    "id": "DRY-1766513400.789012",        "amount": {

    "symbol": "ETH/USDT",          "min": 0.000001,

    "side": "sell",          "max": null

    "type": "market",        },

    "amount": 0.1,        "price": {

    "status": "simulated",          "min": null,

    "timestamp": "2025-12-24T15:10:00.789012"          "max": null

  }        },

}        "cost": {

          "min": 1.0,

================================================================================          "max": 2000000.0

4. CANCELAR ORDEM ‚≠ê        }

================================================================================      }

    },

DESCRI√á√ÉO:    {

Cancela uma ordem aberta existente.      "symbol": "ETH/USDT",

      "base": "ETH",

ENDPOINT:      "quote": "USDT",

POST /api/v1/orders/cancel      "active": true,

      "limits": {

CURL:        "amount": {

curl -X POST http://localhost:5000/api/v1/orders/cancel \          "min": 0.0001,

  -H "Content-Type: application/json" \          "max": null

  -d '{        },

    "user_id": "charles_test_user",        "price": {

    "order_id": "12345678"          "min": null,

  }'          "max": null

        },

RESPONSE (SUCESSO):        "cost": {

{          "min": 1.0,

  "success": true,          "max": 2000000.0

  "message": "Ordem cancelada com sucesso",        }

  "order_id": "12345678",      }

  "status": "canceled"    }

}  ]

}

RESPONSE (ERRO):

{================================================================================

  "success": false,6. BUSCAR TOKEN ESPEC√çFICO

  "error": "Order not found or already canceled"================================================================================

}

curl "http://localhost:5000/api/v1/exchanges/693481148b0a41e8b6acb07b/markets?user_id=charles_test_user&quote=USDT&search=DOGE"

================================================================================

5. HIST√ìRICO DE ORDENS ‚≠ê (COM CACHE)RESPONSE EXEMPLO:

================================================================================{

  "success": true,

DESCRI√á√ÉO:  "count": 1,

Busca hist√≥rico de ordens fechadas/canceladas da exchange.  "exchange": "MEXC",

‚úÖ Cache de 5 minutos para evitar rate limiting.  "exchange_id": "693481148b0a41e8b6acb07b",

‚úÖ Suporta at√© 500 ordens por requisi√ß√£o.  "quote_filter": "USDT",

  "markets": [

ENDPOINT:    {

GET /api/v1/orders/history      "symbol": "DOGE/USDT",

      "base": "DOGE",

PAR√ÇMETROS:      "quote": "USDT",

- user_id (obrigat√≥rio): ID do usu√°rio      "active": true,

- exchange_id (obrigat√≥rio): ID da exchange      "limits": {

- symbol (opcional): Par espec√≠fico (ex: BTC/USDT)        "amount": {

- limit (opcional): N√∫mero de ordens (default: 100, max: 500)          "min": 1.0,

- use_cache (opcional): true/false (default: true)          "max": null

        },

CURL - √öLTIMAS 50 ORDENS:        "price": {

curl "http://localhost:5000/api/v1/orders/history?user_id=charles_test_user&exchange_id=693481148b0a41e8b6acb07b&limit=50"          "min": null,

          "max": null

CURL - HIST√ìRICO DE BTC/USDT:        },

curl "http://localhost:5000/api/v1/orders/history?user_id=charles_test_user&exchange_id=693481148b0a41e8b6acb07b&symbol=BTC/USDT&limit=100"        "cost": {

          "min": 1.0,

CURL - SEM CACHE:          "max": 2000000.0

curl "http://localhost:5000/api/v1/orders/history?user_id=charles_test_user&exchange_id=693481148b0a41e8b6acb07b&limit=50&use_cache=false"        }

      }

RESPONSE:    }

{  ]

  "success": true,}

  "count": 50,

  "exchange": "MEXC",================================================================================

  "exchange_id": "693481148b0a41e8b6acb07b",10. CONSULTAR ORDENS ABERTAS

  "symbol": null,================================================================================

  "limit": 50,

  "from_cache": true,curl "http://localhost:5000/api/v1/orders/open?user_id=charles_test_user&exchange_id=693481148b0a41e8b6acb07b"

  "orders": [

    {RESPONSE EXEMPLO (SEM ORDENS):

      "id": "12345678",{

      "symbol": "DOGE/USDT",  "success": true,

      "type": "limit",  "count": 0,

      "side": "buy",  "exchange": "MEXC",

      "price": 0.20,  "exchange_id": "693481148b0a41e8b6acb07b",

      "amount": 100.0,  "orders": []

      "filled": 100.0,}

      "remaining": 0.0,

      "status": "closed",RESPONSE EXEMPLO (COM ORDENS):

      "timestamp": 1766513096228,{

      "datetime": "2025-12-24T15:04:56.228Z",  "success": true,

      "cost": 20.0,  "count": 2,

      "fee": {  "exchange": "MEXC",

        "cost": 0.02,  "exchange_id": "693481148b0a41e8b6acb07b",

        "currency": "USDT"  "orders": [

      }    {

    }      "id": "12345678",

  ]      "symbol": "DOGE/USDT",

}      "type": "limit",

      "side": "buy",

CACHE INFO:      "price": 0.20,

üíæ Cache ativo por 5 minutos      "amount": 100.0,

üîÑ Para for√ßar atualiza√ß√£o: use_cache=false      "remaining": 100.0,

‚è±Ô∏è Ajuda a evitar rate limiting da exchange      "filled": 0.0,

      "status": "open",

================================================================================      "timestamp": 1766513096228,

6. LISTAR TOKENS DISPON√çVEIS ‚≠ê      "datetime": "2025-12-24T15:04:56.228Z"

================================================================================    },

    {

DESCRI√á√ÉO:      "id": "87654321",

Lista todos os tokens dispon√≠veis para negocia√ß√£o com suas configura√ß√µes m√≠nimas.      "symbol": "ETH/USDT",

      "type": "limit",

ENDPOINT:      "side": "buy",

GET /api/v1/exchanges/<exchange_id>/markets      "price": 3000.0,

      "amount": 0.1,

PAR√ÇMETROS:      "remaining": 0.1,

- user_id (obrigat√≥rio): ID do usu√°rio      "filled": 0.0,

- quote (opcional): Moeda de cota√ß√£o (default: USDT)      "status": "open",

- search (opcional): Buscar token espec√≠fico      "timestamp": 1766513200000,

      "datetime": "2025-12-24T15:06:40.000Z"

CURL - TODOS OS PARES USDT:    }

curl "http://localhost:5000/api/v1/exchanges/693481148b0a41e8b6acb07b/markets?user_id=charles_test_user&quote=USDT"  ]

}

CURL - BUSCAR DOGE:

curl "http://localhost:5000/api/v1/exchanges/693481148b0a41e8b6acb07b/markets?user_id=charles_test_user&quote=USDT&search=DOGE"================================================================================

8. CONSULTAR ORDENS ABERTAS DE UM PAR ESPEC√çFICO

CURL - PARES BTC:================================================================================

curl "http://localhost:5000/api/v1/exchanges/693481148b0a41e8b6acb07b/markets?user_id=charles_test_user&quote=BTC"

curl "http://localhost:5000/api/v1/orders/open?user_id=charles_test_user&exchange_id=693481148b0a41e8b6acb07b&symbol=DOGE/USDT"

RESPONSE:

{================================================================================

  "success": true,9. VERIFICAR SALDO DISPON√çVEL PARA VENDA

  "count": 2876,================================================================================

  "exchange": "MEXC",

  "exchange_id": "693481148b0a41e8b6acb07b",curl "http://localhost:5000/api/v1/exchanges/693481148b0a41e8b6acb07b/balance/DOGE?user_id=charles_test_user"

  "quote_filter": "USDT",

  "markets": [RESPONSE EXEMPLO (COM SALDO):

    {{

      "symbol": "BTC/USDT",  "success": true,

      "base": "BTC",  "token": "DOGE",

      "quote": "USDT",  "exchange": "MEXC",

      "active": true,  "exchange_id": "693481148b0a41e8b6acb07b",

      "limits": {  "balance": {

        "amount": {"min": 0.000001, "max": null},    "available": 150.5,

        "price": {"min": null, "max": null},    "used": 50.0,

        "cost": {"min": 1.0, "max": 2000000.0}    "total": 200.5

      }  },

    }  "can_sell": true,

  ]  "message": "Voc√™ possui 150.5 DOGE dispon√≠vel para venda"

}}



================================================================================RESPONSE EXEMPLO (SEM SALDO):

TABELA DE TOKENS POPULARES{

================================================================================  "success": true,

  "token": "DOGE",

TOKEN     | SYMBOL     | MIN AMOUNT | MIN COST  "exchange": "MEXC",

--------- | ---------- | ---------- | --------  "exchange_id": "693481148b0a41e8b6acb07b",

Bitcoin   | BTC/USDT   | 0.000001   | $1.00  "balance": {

Ethereum  | ETH/USDT   | 0.0001     | $1.00    "available": 0.0,

Solana    | SOL/USDT   | 0.01       | $1.00    "used": 0.0,

Dogecoin  | DOGE/USDT  | 1.0        | $1.00    "total": 0.0

XRP       | XRP/USDT   | 0.1        | $1.00  },

Cardano   | ADA/USDT   | 0.1        | $1.00  "can_sell": false,

  "message": "Voc√™ n√£o possui DOGE nesta exchange"

================================================================================}

EXEMPLO JAVASCRIPT COMPLETO

================================================================================OUTROS TOKENS:

curl "http://localhost:5000/api/v1/exchanges/693481148b0a41e8b6acb07b/balance/BTC?user_id=charles_test_user"

// 1. VERIFICAR SALDOcurl "http://localhost:5000/api/v1/exchanges/693481148b0a41e8b6acb07b/balance/ETH?user_id=charles_test_user"

async function checkBalance(userId, exchangeId, token) {curl "http://localhost:5000/api/v1/exchanges/693481148b0a41e8b6acb07b/balance/USDT?user_id=charles_test_user"

  const res = await fetch(

    \`http://localhost:5000/api/v1/exchanges/\${exchangeId}/balance/\${token}?user_id=\${userId}\`================================================================================

  );10. CONSULTAR ORDENS ABERTAS

  return await res.json();================================================================================

}

‚ö†Ô∏è ENDPOINT N√ÉO IMPLEMENTADO AINDA

// 2. CRIAR ORDEM DE COMPRA LIMIT‚ö†Ô∏è Endpoint sugerido: POST /api/v1/orders/cancel

async function buyLimit(userId, exchangeId, token, amount, price) {

  const res = await fetch('http://localhost:5000/api/v1/orders/buy', {Request Body Sugerido:

    method: 'POST',{

    headers: { 'Content-Type': 'application/json' },  "user_id": "charles_test_user",

    body: JSON.stringify({  "exchange_id": "693481148b0a41e8b6acb07b",

      user_id: userId,  "order_id": "12345678",

      exchange_id: exchangeId,  "symbol": "DOGE/USDT"

      token, amount,}

      order_type: 'limit',

      price================================================================================

    })10. TOKENS POPULARES DISPON√çVEIS

  });================================================================================

  return await res.json();

}TOKEN       | SYMBOL     | MIN AMOUNT | MIN COST

----------- | ---------- | ---------- | --------

// 3. CRIAR ORDEM DE VENDA LIMITBitcoin     | BTC/USDT   | 0.000001   | $1.00

async function sellLimit(userId, exchangeId, token, amount, price) {Ethereum    | ETH/USDT   | 0.0001     | $1.00

  const res = await fetch('http://localhost:5000/api/v1/orders/sell', {Solana      | SOL/USDT   | 0.01       | $1.00

    method: 'POST',Dogecoin    | DOGE/USDT  | 1.0        | $1.00

    headers: { 'Content-Type': 'application/json' },XRP         | XRP/USDT   | 0.1        | $1.00

    body: JSON.stringify({Cardano     | ADA/USDT   | 0.1        | $1.00

      user_id: userId,Avalanche   | AVAX/USDT  | 0.0001     | $1.00

      exchange_id: exchangeId,Polkadot    | DOT/USDT   | 0.001      | $1.00

      token, amount,Chainlink   | LINK/USDT  | 0.01       | $1.00

      order_type: 'limit',Polygon     | MATIC/USDT | 0.1        | $1.00

      price

    })================================================================================

  });EXEMPLO DE USO EM JAVASCRIPT (FRONTEND)

  return await res.json();================================================================================

}

// 1. Buscar tokens dispon√≠veis

// 4. CANCELAR ORDEMasync function getAvailableTokens(userId, exchangeId, quote = 'USDT') {

async function cancelOrder(userId, orderId) {  const response = await fetch(

  const res = await fetch('http://localhost:5000/api/v1/orders/cancel', {    `http://localhost:5000/api/v1/exchanges/${exchangeId}/markets?user_id=${userId}&quote=${quote}`

    method: 'POST',  );

    headers: { 'Content-Type': 'application/json' },  return await response.json();

    body: JSON.stringify({ user_id: userId, order_id: orderId })}

  });

  return await res.json();// 2. Buscar token espec√≠fico

}async function searchToken(userId, exchangeId, search) {

  const response = await fetch(

// 5. HIST√ìRICO COM CACHE    `http://localhost:5000/api/v1/exchanges/${exchangeId}/markets?user_id=${userId}&quote=USDT&search=${search}`

async function getHistory(userId, exchangeId, limit = 100) {  );

  const res = await fetch(  return await response.json();

    \`http://localhost:5000/api/v1/orders/history?user_id=\${userId}&exchange_id=\${exchangeId}&limit=\${limit}\`}

  );

  return await res.json();// 3. Criar ordem de compra limit

}async function createBuyOrder(userId, exchangeId, token, amount, price) {

  const response = await fetch('http://localhost:5000/api/v1/orders/buy', {

// 6. LISTAR TOKENS    method: 'POST',

async function getTokens(userId, exchangeId) {    headers: {

  const res = await fetch(      'Content-Type': 'application/json',

    \`http://localhost:5000/api/v1/exchanges/\${exchangeId}/markets?user_id=\${userId}&quote=USDT\`    },

  );    body: JSON.stringify({

  return await res.json();      user_id: userId,

}      exchange_id: exchangeId,

      token: token,

// EXEMPLO DE USO COMPLETO      amount: amount,

async function tradingExample() {      order_type: 'limit',

  const userId = 'charles_test_user';      price: price

  const exchangeId = '693481148b0a41e8b6acb07b';    }),

    });

  // Verificar saldo  return await response.json();

  const balance = await checkBalance(userId, exchangeId, 'USDT');}

  console.log('Saldo:', balance);

  // 4. Criar ordem de compra market

  // Criar ordem de compraasync function createMarketBuyOrder(userId, exchangeId, token, amount) {

  const order = await buyLimit(userId, exchangeId, 'DOGE', 100, 0.20);  const response = await fetch('http://localhost:5000/api/v1/orders/buy', {

  console.log('Ordem:', order);    method: 'POST',

      headers: {

  // Ver hist√≥rico      'Content-Type': 'application/json',

  const history = await getHistory(userId, exchangeId, 50);    },

  console.log('Hist√≥rico:', history.count, 'ordens');    body: JSON.stringify({

        user_id: userId,

  // Cancelar ordem      exchange_id: exchangeId,

  if (order.order?.id) {      token: token,

    await cancelOrder(userId, order.order.id);      amount: amount,

  }      order_type: 'market'

}    }),

  });

================================================================================  return await response.json();

OBSERVA√á√ïES IMPORTANTES}

================================================================================

// 5. Criar ordem de venda limit

‚ö†Ô∏è DRY-RUN MODE:async function createSellOrder(userId, exchangeId, token, amount, price) {

‚úì Sistema em modo DRY-RUN por padr√£o  const response = await fetch('http://localhost:5000/api/v1/orders/sell', {

‚úì Ordens s√£o SIMULADAS, n√£o executadas    method: 'POST',

‚úì Para desabilitar: STRATEGY_DRY_RUN=false no .env    headers: {

      'Content-Type': 'application/json',

‚ö†Ô∏è CACHE:    },

‚úì Hist√≥rico: cache de 5 minutos    body: JSON.stringify({

‚úì For√ßar atualiza√ß√£o: use_cache=false      user_id: userId,

      exchange_id: exchangeId,

‚ö†Ô∏è RATE LIMITING:      token: token,

‚úì MEXC tem limites de requisi√ß√µes      amount: amount,

‚úì Use cache sempre que poss√≠vel      order_type: 'limit',

      price: price

‚ö†Ô∏è VALIDA√á√ïES:    }),

‚úì Sempre verificar saldo antes de criar ordem  });

‚úì Validar quantidade m√≠nima do token  return await response.json();

}

================================================================================

RESUMO DOS ENDPOINTS// 6. Criar ordem de venda market

================================================================================async function createMarketSellOrder(userId, exchangeId, token, amount) {

  const response = await fetch('http://localhost:5000/api/v1/orders/sell', {

ENDPOINT                                    | M√âTODO | CACHE    method: 'POST',

------------------------------------------ | ------ | -----    headers: {

/api/v1/exchanges/{id}/balance/{token}     | GET    | N√£o      'Content-Type': 'application/json',

/api/v1/orders/buy                         | POST   | N√£o    },

/api/v1/orders/sell                        | POST   | N√£o    body: JSON.stringify({

/api/v1/orders/cancel                      | POST   | N√£o      user_id: userId,

/api/v1/orders/history                     | GET    | 5 min      exchange_id: exchangeId,

/api/v1/exchanges/{id}/markets             | GET    | N√£o      token: token,

      amount: amount,

================================================================================      order_type: 'market'

FIM DO DOCUMENTO    }),

================================================================================  });

  return await response.json();
}

// 7. Consultar ordens abertas
async function getOpenOrders(userId, exchangeId, symbol = null) {
  let url = `http://localhost:5000/api/v1/orders/open?user_id=${userId}&exchange_id=${exchangeId}`;
  if (symbol) {
    url += `&symbol=${symbol}`;
  }
  const response = await fetch(url);
  return await response.json();
}

// 8. Exemplo de uso completo
async function exampleUsage() {
  const userId = 'charles_test_user';
  const exchangeId = '693481148b0a41e8b6acb07b';

  // Buscar tokens dispon√≠veis
  const tokens = await getAvailableTokens(userId, exchangeId);
  console.log('Tokens dispon√≠veis:', tokens.count);

  // Buscar DOGE
  const doge = await searchToken(userId, exchangeId, 'DOGE');
  console.log('DOGE info:', doge.markets[0]);

  // Criar ordem de compra limit
  const buyOrder = await createBuyOrder(userId, exchangeId, 'DOGE', 100, 0.20);
  console.log('Ordem criada:', buyOrder);

  // Consultar ordens abertas
  const openOrders = await getOpenOrders(userId, exchangeId);
  console.log('Ordens abertas:', openOrders.count);
}

================================================================================
EXEMPLO DE USO EM REACT (COMPONENTE)
================================================================================

import { useState, useEffect } from 'react';

function TradingModal({ userId, exchangeId }) {
  const [tokens, setTokens] = useState([]);
  const [selectedToken, setSelectedToken] = useState('');
  const [amount, setAmount] = useState('');
  const [price, setPrice] = useState('');
  const [orderType, setOrderType] = useState('limit'); // limit or market
  const [side, setSide] = useState('buy'); // buy or sell

  useEffect(() => {
    // Carregar tokens dispon√≠veis
    fetch(`http://localhost:5000/api/v1/exchanges/${exchangeId}/markets?user_id=${userId}&quote=USDT`)
      .then(res => res.json())
      .then(data => setTokens(data.markets || []));
  }, [userId, exchangeId]);

  const handleSubmit = async (e) => {
    e.preventDefault();

    const endpoint = side === 'buy' 
      ? 'http://localhost:5000/api/v1/orders/buy'
      : 'http://localhost:5000/api/v1/orders/sell';

    const body = {
      user_id: userId,
      exchange_id: exchangeId,
      token: selectedToken,
      amount: parseFloat(amount),
      order_type: orderType,
    };

    if (orderType === 'limit') {
      body.price = parseFloat(price);
    }

    try {
      const response = await fetch(endpoint, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(body),
      });

      const result = await response.json();
      
      if (result.success) {
        alert('Ordem criada com sucesso!');
      } else {
        alert('Erro ao criar ordem: ' + result.error);
      }
    } catch (error) {
      alert('Erro na requisi√ß√£o: ' + error.message);
    }
  };

  return (
    <div className="trading-modal">
      <h2>Nova Ordem</h2>
      
      <form onSubmit={handleSubmit}>
        {/* Comprar / Vender */}
        <div>
          <button 
            type="button"
            onClick={() => setSide('buy')}
            className={side === 'buy' ? 'active' : ''}
          >
            Comprar
          </button>
          <button 
            type="button"
            onClick={() => setSide('sell')}
            className={side === 'sell' ? 'active' : ''}
          >
            Vender
          </button>
        </div>

        {/* Token */}
        <div>
          <label>Token:</label>
          <select 
            value={selectedToken} 
            onChange={(e) => setSelectedToken(e.target.value)}
            required
          >
            <option value="">Selecione um token</option>
            {tokens.map(token => (
              <option key={token.symbol} value={token.base}>
                {token.symbol}
              </option>
            ))}
          </select>
        </div>

        {/* Tipo de Ordem */}
        <div>
          <label>Tipo:</label>
          <select 
            value={orderType} 
            onChange={(e) => setOrderType(e.target.value)}
          >
            <option value="limit">Limit</option>
            <option value="market">Market</option>
          </select>
        </div>

        {/* Quantidade */}
        <div>
          <label>Quantidade:</label>
          <input 
            type="number" 
            step="any"
            value={amount}
            onChange={(e) => setAmount(e.target.value)}
            required
          />
        </div>

        {/* Pre√ßo (s√≥ para limit) */}
        {orderType === 'limit' && (
          <div>
            <label>Pre√ßo:</label>
            <input 
              type="number" 
              step="any"
              value={price}
              onChange={(e) => setPrice(e.target.value)}
              required
            />
          </div>
        )}

        {/* Preview do Total (para limit) */}
        {orderType === 'limit' && amount && price && (
          <div className="preview">
            <strong>Total:</strong> {(parseFloat(amount) * parseFloat(price)).toFixed(2)} USDT
          </div>
        )}

        <button type="submit">Confirmar Ordem</button>
      </form>
    </div>
  );
}

export default TradingModal;

================================================================================
OBSERVA√á√ïES IMPORTANTES
================================================================================

‚ö†Ô∏è DRY-RUN MODE:
- O sistema est√° em modo DRY-RUN por padr√£o
- Ordens s√£o simuladas, n√£o executadas na exchange
- Para desabilitar: definir STRATEGY_DRY_RUN=false no .env

‚ö†Ô∏è ENDPOINT DE CANCELAR ORDEM:
- Ainda n√£o foi implementado
- Ser√° necess√°rio criar para cancelar ordens reais

‚ö†Ô∏è AUTENTICA√á√ÉO:
- Atualmente n√£o h√° autentica√ß√£o nos endpoints
- Em produ√ß√£o, adicionar JWT ou similar

‚ö†Ô∏è RATE LIMITING:
- A MEXC tem limites de requisi√ß√µes
- Implementar rate limiting no frontend se necess√°rio

‚ö†Ô∏è VALIDA√á√ïES:
- Validar valores m√≠nimos antes de enviar
- Usar os valores de "limits" retornados pela API

================================================================================
FIM DO DOCUMENTO
================================================================================
